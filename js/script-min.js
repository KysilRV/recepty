"use strict";window.addEventListener("DOMContentLoaded",()=>{const e=[{name:"Икра кабачковая (Света Тищенко)",ingred:["лук: 1000г","морковь: 1000г","сахар: 1с","уксус: 100г","масло(подсолнечное): 100г","соль: 3с","честнок: 100г","паста: 500г"],value:6e3,keyItem:"Кабачки",descr:"На крупную терку, тушить 1,5 часа. Потушить на сковородке + масло подсолнечное чуть-чуть. Все перекрутить на мясорубке. Тушить 25 минут. Все перемешать + еще кипятить в банках 0,5 стерелизовать 20 шт. и замотать. Выход: 12 - 13 банок по 0,5 л."},{name:"Борщова приправа (Людмила Петровна)",ingred:["перец(сладкий): 3000г","лук: 1500г","морковка: 1500г","масло(подсолнечное): 500г"],value:1e4,keyItem:"Помидоры",descr:"Все перекрутить на мясорубку. Тушить 1 час. Соль и сахар по вкусу."},{name:"Икра кабачковая без уксуса (перетертая)",ingred:["мука: 500г","морковь: 1000г","сахар: 4с","соль: 3с","соус: 485г"],value:3e3,keyItem:"Кабачки чищеные",descr:"Соли 2 - 3 столовые ложки (по вкусу). Мука обтарить на масле. Обтарить кабачки + лук + морковь, взбить взбить ??? блендером. Тушить на медленном огне. За 1 час до готовности добавить любой соус. Выход 7 - 8 банок по 0,5."},{name:"Кабачки с соусом сацебели (Людмила Петровна)",ingred:["соль: 2с","сацебели: 485г","сахар: 18с","масло(растительное): 200г","уксус: 200г","честнок: 2г","перец(черный-молотый): 1ч","перец(красный-молотый): 1ч"],value:5e3,keyItem:"Кабачки молодые",descr:"Кабачки молодые порезать ??? по 2 ???. Тушить 30 минут с момента закипания. Разложить по банкам. Выход 6 литровых банок."}];if(console.log(window.location.href.split("/")),""===window.location.href.split("/")[window.location.href.split("/").length-1]){const t=document.querySelector(".info__title"),n=document.querySelector(".info__ingred"),a=JSON.parse(localStorage.getItem("last")),i=document.querySelector(".info__input"),l=document.querySelector(".info__label"),o=document.querySelector(".info__descr");t.textContent=a.name,t.setAttribute("data-i",localStorage.getItem("index")),i.value=localStorage.getItem("inputValue"),l.textContent="Води"!==a.keyItem?`${a.keyItem} в кг:`:"Води в л",o.textContent=a.descr,a.ingred.forEach(e=>{const t=e.split(" "),a=document.createElement("li");a.classList.add("info__item"),a.innerHTML=`<li class='info__item'><span>${t[0]}</span> ${t[1]}</li>`,n.append(a)});const r=[];for(let e=0;e<n.children.length;e++)r.push(a.ingred[e].split(" ")[1].slice(0,-1));let c=[];r.forEach(e=>{let t=e/a.value*1e3;c.push(Math.round(t*+localStorage.getItem("inputValue")*100)/100)}),[...n.children].forEach((e,t)=>{const n=e.textContent.split(" ");n[1]="перец(черный-молотый):"===n[0]||"перец(красный-молотый):"===n[0]?`${c[t]}ч`:"сахар:"===n[0]||"соль:"===n[0]?`${c[t]}c`:c[t]>=1e3?`${c[t]/1e3}кг`:`${c[t]}г`,e.innerHTML=`<span>${n[0]}</span> ${n[1]}`});const d=document.querySelector(".main__wrapper");e.forEach((e,t)=>{const n=document.createElement("div");n.classList.add("main__item"),n.setAttribute("data-i",t),n.textContent=e.name,d.append(n)});const s=document.querySelector(".main__input"),u=[...d.children];s.addEventListener("input",e=>{const t=e.target;u.forEach(e=>{console.log(e.textContent.slice(0,t.value)),e.textContent.slice(0,t.value.length)!==t.value?e.style.display="none":e.style.display="block"})});const m=document.querySelectorAll(".main__item"),p=document.querySelector(".info__ingred"),g=document.querySelector(".info__title"),_=document.querySelector(".info__descr");m.forEach(t=>{t.addEventListener("click",n=>{const a=n.target;g.textContent=a.textContent,g.setAttribute("data-i",t.getAttribute("data-i")),l.textContent="Води"!==e[g.getAttribute("data-i")].keyItem?`${e[g.getAttribute("data-i")].keyItem} в кг:`:"Води в л",i.value=e[g.getAttribute("data-i")].value/1e3,localStorage.setItem("last",JSON.stringify(e[g.getAttribute("data-i")])),localStorage.setItem("index",g.getAttribute("data-i")),p.textContent="",_.textContent=e[g.getAttribute("data-i")].descr,e[t.getAttribute("data-i")].ingred.forEach(e=>{const t=e.split(" "),n=document.createElement("li");n.classList.add("info__item"),n.innerHTML=`<li class='info__item'><span>${t[0]}</span> ${t[1]}</li>`,p.append(n)})})}),document.querySelector(".info__input").addEventListener("input",t=>{const n=t.target,a=[];localStorage.setItem("inputValue",n.value);for(let t=0;t<p.children.length;t++)a.push(e[g.getAttribute("data-i")].ingred[t].split(" ")[1].slice(0,-1));let i=[];a.forEach(t=>{let a=t/e[g.getAttribute("data-i")].value*1e3;i.push(Math.round(a*+n.value*100)/100)}),[...p.children].forEach((e,t)=>{const n=e.textContent.split(" ");n[1]="перец(черный-молотый):"===n[0]||"перец(красный-молотый):"===n[0]?`${i[t]}ч`:"сахар:"===n[0]||"соль:"===n[0]?`${i[t]}c`:i[t]>=1e3?`${i[t]/1e3}кг`:`${i[t]}г`,e.innerHTML=`<span>${n[0]}</span> ${n[1]}`})})}else{const e=document.querySelector(".add__add"),t=document.querySelector(".add__submit"),n=document.querySelector(".add__ingred");let a="";t.addEventListener("click",()=>{let t=!0;if(n.children[0]&&[...n.children].forEach(n=>{n.textContent.split(" ")[0].slice(0,-1)===e.value.split(" ")[0]&&(t=!1)}),""!==e.value&&+e.value.split(" ")[1]/1>0&&t){const t=e.value.split(" "),i=document.createElement("li");i.classList.add("add__item"),t[1]=+t[1]>=1e3?`${+t[1]/1e3}кг`:`${+t[1]}г`,i.textContent=`${t[0]}: ${t[1]}`,i.setAttribute("data-val",t[1]);const l=i.textContent.split(" ")[1].slice(0,-1);"к"===l[l.length-1]?i.setAttribute("data-val",1e3*i.textContent.split(" ")[1].slice(0,-2)):i.setAttribute("data-val",i.textContent.split(" ")[1].slice(0,-1)),n.append(i),a=document.querySelector(".add__ingred"),e.value=""}});const i=document.querySelector(".add__input"),l=document.querySelector(".add__val");i.addEventListener("input",e=>{if(a.children){const t=e.target,i=[],o=[...a.children];for(let e=0;e<a.children.length;e++)i.push(+o[e].getAttribute("data-val"));console.log(i);let r=[];i.forEach(e=>{let n=e/+l.value;r.push(Math.round(n*+t.value*100)/100)}),[...n.children].forEach((e,t)=>{const n=e.textContent.split(" ");n[1]=r[t]>=1e3?`${r[t]/1e3}кг`:`${r[t]}г`,e.innerHTML=`<span>${n[0]}</span> ${n[1]}`})}})}});